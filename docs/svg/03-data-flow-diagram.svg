<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 1000" width="1400" height="1000">
  <defs>
    <style>
      .title { font: bold 32px 'Inter', sans-serif; fill: #1e3a5f; }
      .process-circle { fill: #2563eb; stroke: #1e3a5f; stroke-width: 3; }
      .process-text { font: bold 14px 'Inter', sans-serif; fill: #ffffff; text-anchor: middle; }
      .entity-rect { fill: #ffffff; stroke: #f59e0b; stroke-width: 3; rx: 4; }
      .entity-text { font: bold 15px 'Inter', sans-serif; fill: #1e3a5f; text-anchor: middle; }
      .datastore-path { fill: none; stroke: #7c3aed; stroke-width: 3; }
      .datastore-text { font: bold 15px 'Inter', sans-serif; fill: #1e3a5f; }
      .flow-arrow { stroke: #475569; stroke-width: 2.5; fill: none; marker-end: url(#arrow); }
      .flow-label { font: 12px 'Inter', sans-serif; fill: #475569; }
      .data-label { font: bold 11px 'Inter', sans-serif; fill: #1e3a5f; }
      .legend-text { font: 13px 'Inter', sans-serif; fill: #475569; }
      .legend-title { font: bold 14px 'Inter', sans-serif; fill: #1e3a5f; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto">
      <polygon points="0 0, 10 3, 0 6" fill="#475569" />
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1400" height="1000" fill="#f8fafc"/>

  <!-- Title -->
  <text x="700" y="50" class="title" text-anchor="middle">Data Flow Diagram - Thesis Submission & Evaluation</text>

  <!-- EXTERNAL ENTITIES -->
  <!-- User/Student -->
  <rect x="50" y="150" width="180" height="80" class="entity-rect"/>
  <text x="140" y="185" class="entity-text">Student/Educator</text>
  <text x="140" y="205" class="entity-text" style="font-size: 12px; fill: #475569;">External Entity</text>

  <!-- AI Service -->
  <rect x="1150" y="420" width="180" height="80" class="entity-rect"/>
  <text x="1240" y="455" class="entity-text">AI/ML Service</text>
  <text x="1240" y="475" class="entity-text" style="font-size: 12px; fill: #475569;">External API</text>

  <!-- Email Service -->
  <rect x="1150" y="720" width="180" height="80" class="entity-rect"/>
  <text x="1240" y="755" class="entity-text">Email Service</text>
  <text x="1240" y="775" class="entity-text" style="font-size: 12px; fill: #475569;">Notification System</text>

  <!-- PROCESSES (Circles) -->
  <!-- P1: Upload Document -->
  <circle cx="400" cy="190" r="70" class="process-circle"/>
  <text x="400" y="180" class="process-text">P1</text>
  <text x="400" y="200" class="process-text">Upload</text>
  <text x="400" y="215" class="process-text">Document</text>

  <!-- P2: Validate Structure -->
  <circle cx="650" cy="190" r="70" class="process-circle"/>
  <text x="650" y="180" class="process-text">P2</text>
  <text x="650" y="200" class="process-text">Validate</text>
  <text x="650" y="215" class="process-text">Structure</text>

  <!-- P3: AI Analysis -->
  <circle cx="900" cy="320" r="70" class="process-circle"/>
  <text x="900" y="310" class="process-text">P3</text>
  <text x="900" y="330" class="process-text">AI Content</text>
  <text x="900" y="345" class="process-text">Analysis</text>

  <!-- P4: Generate Feedback -->
  <circle cx="650" cy="460" r="70" class="process-circle"/>
  <text x="650" y="450" class="process-text">P4</text>
  <text x="650" y="470" class="process-text">Generate</text>
  <text x="650" y="485" class="process-text">Feedback</text>

  <!-- P5: Store Results -->
  <circle cx="650" cy="680" r="70" class="process-circle"/>
  <text x="650" y="670" class="process-text">P5</text>
  <text x="650" y="690" class="process-text">Store</text>
  <text x="650" y="705" class="process-text">Results</text>

  <!-- P6: Display Results -->
  <circle cx="400" cy="760" r="70" class="process-circle"/>
  <text x="400" y="750" class="process-text">P6</text>
  <text x="400" y="770" class="process-text">Display</text>
  <text x="400" y="785" class="process-text">Results</text>

  <!-- DATA STORES -->
  <!-- D1: Document Storage -->
  <path d="M 900 130 L 1050 130 L 1050 180 L 900 180" class="datastore-path"/>
  <path d="M 910 130 L 910 180" class="datastore-path"/>
  <text x="920" y="160" class="datastore-text">D1: Document Storage</text>

  <!-- D2: Database -->
  <path d="M 350 500 L 500 500 L 500 550 L 350 550" class="datastore-path"/>
  <path d="M 360 500 L 360 550" class="datastore-path"/>
  <text x="370" y="530" class="datastore-text">D2: Database</text>

  <!-- D3: Results Cache -->
  <path d="M 820 600 L 970 600 L 970 650 L 820 650" class="datastore-path"/>
  <path d="M 830 600 L 830 650" class="datastore-path"/>
  <text x="840" y="630" class="datastore-text">D3: Results Cache</text>

  <!-- DATA FLOWS -->
  <!-- User to P1: Upload Thesis -->
  <path d="M 230 190 L 330 190" class="flow-arrow"/>
  <text x="245" y="175" class="data-label">1. Thesis Document</text>
  <text x="245" y="188" class="flow-label">(PDF/DOCX)</text>

  <!-- P1 to P2: Document Data -->
  <path d="M 470 190 L 580 190" class="flow-arrow"/>
  <text x="485" y="175" class="data-label">2. Parsed Content</text>
  <text x="485" y="188" class="flow-label">(Text + Metadata)</text>

  <!-- P2 to D1: Store Document -->
  <path d="M 720 170 L 900 155" class="flow-arrow"/>
  <text x="750" y="155" class="data-label">3. Store File</text>

  <!-- P2 to P3: Validated Content -->
  <path d="M 710 230 L 840 280" class="flow-arrow"/>
  <text x="730" y="250" class="data-label">4. Structured Data</text>
  <text x="730" y="263" class="flow-label">(Validated Content)</text>

  <!-- P3 to AI Service: Request Analysis -->
  <path d="M 970 340 L 1150 380" class="flow-arrow"/>
  <text x="1000" y="355" class="data-label">5. Analysis Request</text>

  <!-- AI Service to P3: Analysis Results -->
  <path d="M 1150 420 L 970 360" class="flow-arrow"/>
  <text x="1000" y="385" class="data-label">6. AI Insights</text>
  <text x="1000" y="398" class="flow-label">(Quality Scores)</text>

  <!-- P3 to P4: Analysis Data -->
  <path d="M 840 360 L 710 420" class="flow-arrow"/>
  <text x="720" y="385" class="data-label">7. Assessment Data</text>
  <text x="720" y="398" class="flow-label">(Scores + Issues)</text>

  <!-- P4 to P5: Feedback Report -->
  <path d="M 650 530 L 650 610" class="flow-arrow"/>
  <text x="660" y="565" class="data-label">8. Complete Report</text>
  <text x="660" y="578" class="flow-label">(Feedback + Grades)</text>

  <!-- P5 to D2: Save to Database -->
  <path d="M 580 670 L 490 540" class="flow-arrow"/>
  <text x="500" y="600" class="data-label">9. Store Results</text>

  <!-- P5 to D3: Cache Results -->
  <path d="M 720 685 L 820 630" class="flow-arrow"/>
  <text x="730" y="655" class="data-label">10. Cache Data</text>

  <!-- P5 to P6: Results Ready -->
  <path d="M 590 720 L 470 755" class="flow-arrow"/>
  <text x="485" y="735" class="data-label">11. Formatted Results</text>

  <!-- P5 to Email: Send Notification -->
  <path d="M 720 720 L 1150 755" class="flow-arrow"/>
  <text x="850" y="735" class="data-label">12. Email Notification</text>

  <!-- P6 to User: Display -->
  <path d="M 330 760 L 230 740" class="flow-arrow"/>
  <text x="240" y="745" class="data-label">13. Assessment Report</text>
  <text x="240" y="758" class="flow-label">(Interactive Dashboard)</text>

  <!-- D2 to P6: Retrieve History -->
  <path d="M 400 690 L 400 610" class="flow-arrow"/>
  <text x="410" y="645" class="data-label">14. Past Submissions</text>

  <!-- LEGEND -->
  <rect x="50" y="870" width="500" height="100" fill="#ffffff" stroke="#2563eb" stroke-width="2" rx="8"/>
  <text x="70" y="895" class="legend-title">LEGEND:</text>

  <rect x="70" y="905" width="60" height="30" class="entity-rect"/>
  <text x="140" y="924" class="legend-text">= External Entity</text>

  <circle cx="290" cy="920" r="15" class="process-circle"/>
  <text x="315" y="924" class="legend-text">= Process</text>

  <path d="M 410 915 L 460 915 L 460 930 L 410 930" class="datastore-path"/>
  <path d="M 415 915 L 415 930" class="datastore-path"/>
  <text x="470" y="924" class="legend-text">= Data Store</text>

  <line x1="70" y1="950" x2="120" y2="950" class="flow-arrow"/>
  <text x="130" y="954" class="legend-text">= Data Flow</text>

  <!-- Footer -->
  <text x="700" y="970" class="legend-text" text-anchor="middle" style="font-style: italic;">
    Figure 3: Data Flow Diagram showing the complete thesis submission and evaluation workflow
  </text>
</svg>
